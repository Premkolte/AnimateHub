"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["packages_relay-environment_relay-environment_ts-packages_soft-nav_state_ts-packages_agent-ses-2d4f01"],{47723:(e,t,r)=>{r.d(t,{Ct:()=>o,Dv:()=>n,Ff:()=>a,R2:()=>s,XT:()=>l,pr:()=>i,qB:()=>u});let n="agents",a="Agents",i="/copilot/agents",s=1e4,o="/issues/agent_assignments",l="/copilot/agent-sessions/repositories",u="Provide additional instructions for Copilot (optional)";function c(e,t,r,n,a,i,s,o,l,u,d=0,p=!1){let h=new Date("2025-06-04T20:00:00.000Z"),f=new Date(h.getTime()-24*u*36e5),m=new Date(h.getTime()-24*d*36e5);return{id:e,number:t,state:r,title:n,reviewable_state:a,url:`http://github.localhost:80/monalisa/smile/pull/${t}`,labels:i,comments:s,assignees_avatar_urls:Array.from({length:o},(t,r)=>`https://avatars.githubusercontent.com/u/${e+r}?v=4`),created_at:f.toISOString(),updated_at:m.toISOString(),merged_at:"merged"===r?m.toISOString():void 0,closed_at:"closed"===r||"merged"===r?m.toISOString():void 0,author:l,head_sha:`${n.toLowerCase().replace(/\s+/g,"")}123456789abcdef0123456789abcdef01234567`.substring(0,40),repository_nwo:"monalisa/smile",inMergeQueue:p}}function d(e,t,r,n,a,i,s,o=0,l=0,u){let c=new Date("2025-06-04T20:00:00.000Z"),p=new Date(c.getTime()-60*s*6e4),h=new Date(c.getTime()-60*o*6e4);return{id:e,name:t,user_id:r,agent_id:n,state:a,owner_id:9919,repo_id:4,resource_type:"pull",resource_id:i,created_at:p.toISOString(),last_updated_at:h.toISOString(),completed_at:"completed"===a||"failed"===a?h.toISOString():void 0,workflow_run_id:12340+Math.floor(30*Math.random()),log_entries:[],error:u?{message:u}:null,premium_requests:l,event_identifiers:null,event_type:"api_call_received"}}function p(e,t){return{resource_type:"pull",resource_id:e.id,session_count:1,latest_session_updated_at:t.last_updated_at,latest_session_state:t.state,pull:e}}(()=>{let e=["cancelled","idle","in_progress","waiting_for_user","completed","failed","timed_out"],t={titles:["Refactor database queries for performance","Implement dark mode theme","Optimize API response times","Add mobile responsive design","Implement caching layer","Add internationalization support","Update documentation and README","Fix critical security vulnerability","Add user authentication system","Initial project setup and configuration","Implement real-time notifications","Add search functionality","Optimize bundle size","Add unit tests coverage","Implement error handling","Add accessibility features","Optimize database connections","Implement feature flags","Migrate to TypeScript","Implement CI/CD pipeline","Add monitoring and alerts"],authors:["alice-dev","bob-backend","charlie-frontend","diana-fullstack","eve-designer","frank-security"],labels:[["performance","database"],["ui","theme","enhancement"],["performance","api"],["mobile","responsive","ui"],["performance","caching","backend"],["i18n","feature","localization"]],errorMessages:["timeout","validation error","resource conflict","permission denied"]},r=1;return[...["open","closed","merged"].flatMap(n=>e.map(e=>{let a=(r-1)%t.titles.length,i=t.titles[a],s=t.authors[(r-1)%t.authors.length],o=t.labels[a%t.labels.length],l=p(c(r,r,n,i,Math.random()>.7?"draft":"ready",o,Math.floor(15*Math.random())+1,Math.floor(3*Math.random()),s,r,r),d(`session-${r.toString().padStart(3,"0")}`,`${i.split(" ").slice(0,3).join(" ")} - ${e}`,0x996718+r,1143300+r,e,r,r,r,Math.floor(10*Math.random()),"failed"===e?`Operation failed due to ${t.errorMessages[Math.floor(4*Math.random())]}`:void 0));return r++,l})),p(c(r,r,"open","Add feature flags support (in merge queue)","ready",["feature","flags"],5,1,"alice-dev",21,0,!0),d(`session-${r.toString().padStart(3,"0")}`,"Add feature flags support - in_progress",0x996718+r,1143300+r,"in_progress",r,1,0,2,void 0))]})()},11418:(e,t,r)=>{let n;r.d(t,{H:()=>O});var a=r(35750),i=r(18150),s=r(85242),o=r(88243),l=r(16213),u=r(10204),c=new WeakMap,d=new WeakSet;let AliveSession=class AliveSession extends u.ib{constructor(e,t,r,n,a){super(e,()=>(0,o._)(this,d,p).call(this),r,n,void 0,a),(0,l._)(this,d),(0,i._)(this,c,{writable:!0,value:void 0}),(0,s._)(this,c,t)}};function p(){return h((0,a._)(this,c))}async function h(e){let t=await f(e);return t&&t.url&&t.token?m(t.url,t.token):null}async function f(e){let t=await fetch(e,{headers:{Accept:"application/json"}});if(t.ok)return t.json();if(404===t.status)return null;throw Error("fetch error")}async function m(e,t){let r=await fetch(e,{method:"POST",mode:"same-origin",headers:{"Scoped-CSRF-Token":t}});if(r.ok)return r.text();throw Error("fetch error")}var g=r(70170),v=r(34095),b=r(82075),w=r(23683),y=r(69599);function S(e,{channel:t,type:r,data:n}){for(let a of e)a.dispatchEvent(new CustomEvent(`socket:${r}`,{bubbles:!1,cancelable:!1,detail:{name:t,data:n}}))}var _=new WeakMap,E=new WeakMap,A=new WeakMap,k=new WeakMap,x=new WeakMap,R=new WeakSet;let T=class AliveSessionProxy{subscribe(e){let t=(0,a._)(this,E).add(...e);t.length&&(0,a._)(this,_).port.postMessage({subscribe:t});let r=new Set(t.map(e=>e.name)),n=e.reduce((e,t)=>{let n=t.topic.name;return(0,u.JR)(n)&&!r.has(n)&&e.add(n),e},new Set);n.size&&(0,a._)(this,_).port.postMessage({requestPresence:Array.from(n)})}unsubscribeAll(...e){let t=(0,a._)(this,E).drain(...e);t.length&&(0,a._)(this,_).port.postMessage({unsubscribe:t});let r=(0,a._)(this,A).removeSubscribers(e);this.sendPresenceMetadataUpdate(r)}updatePresenceMetadata(e){let t=new Set;for(let r of e)(0,a._)(this,A).setMetadata(r),t.add(r.channelName);this.sendPresenceMetadataUpdate(t)}sendPresenceMetadataUpdate(e){if(!e.size)return;let t=[];for(let r of e)t.push({channelName:r,metadata:(0,a._)(this,A).getChannelMetadata(r)});(0,a._)(this,_).port.postMessage({updatePresenceMetadata:t})}online(){(0,a._)(this,_).port.postMessage({online:!0})}offline(){(0,a._)(this,_).port.postMessage({online:!1})}hangup(){(0,a._)(this,_).port.postMessage({hangup:!0})}constructor(e,t,r,n,c,d){(0,l._)(this,R),(0,i._)(this,_,{writable:!0,value:void 0}),(0,i._)(this,E,{writable:!0,value:new u.m0}),(0,i._)(this,A,{writable:!0,value:new u.VH}),(0,i._)(this,k,{writable:!0,value:void 0}),(0,i._)(this,x,{writable:!0,value:new Map}),(0,s._)(this,k,c),(0,s._)(this,_,new SharedWorker(`${e}?module=true`,{name:`github-socket-worker-v3-${n}`,type:"module"})),(0,a._)(this,_).port.onmessage=({data:e})=>(0,o._)(this,R,I).call(this,e),(0,a._)(this,_).port.postMessage({connect:{url:t,refreshUrl:r,options:d}})}};function I(e){let{channel:t}=e;if("presence"===e.type){let r=(0,a._)(this,x).get(t);r||(r=(0,g.s)((e,r)=>{(0,a._)(this,k).call(this,e,r),(0,a._)(this,x).delete(t)},100),(0,a._)(this,x).set(t,r)),r((0,a._)(this,E).subscribers(t),e);return}(0,a._)(this,k).call(this,(0,a._)(this,E).subscribers(t),e)}async function C(){let e=function(){let e=document.head.querySelector("link[rel=shared-web-socket-src]")?.getAttribute("href");return e&&e.startsWith("/")?e:null}();if(!e)return;let t=document.head.querySelector("link[rel=shared-web-socket]")?.href??null;if(!t)return;let r=document.head.querySelector("link[rel=shared-web-socket]")?.getAttribute("data-refresh-url")??null;if(!r)return;let n=document.head.querySelector("link[rel=shared-web-socket]")?.getAttribute("data-session-id")??null;if(!n)return;let a=(()=>{let a=(0,y.G7)("alive_legacy_retries")?{socketPolicy:{timeout:4e3,attempts:7}}:{};if(!(0,w.nr)()&&"SharedWorker"in window&&"true"!==(0,b.A)("localStorage").getItem("bypassSharedWorker"))try{return new T(e,t,r,n,S,a)}catch{}return new AliveSession(t,r,!1,S,a)})();return window.addEventListener("online",()=>a.online()),window.addEventListener("offline",()=>a.offline()),window.addEventListener("pagehide",()=>{"hangup"in a&&a.hangup()}),a}async function N(){return await v.G,C()}function O(){return n||(n=N())}},73056:(e,t,r)=>{r.d(t,{$:()=>s});var n=r(10204),a=r(33303);let i=new WeakMap;function s(e,t,r){let s;if(!e)throw Error("Not connected to alive");if(!t)throw Error("No channel name");let o=n.KK.parse(t);if(!o)throw Error("Invalid channel name");let l={subscriber:{dispatchEvent:e=>{e instanceof CustomEvent&&r(e.detail.data)}},topic:o},u=((s=i.get(e))||(s={subscribe:(0,a.rK)(t=>e.subscribe(t.flat())),unsubscribeAll:(0,a.rK)(t=>e.unsubscribeAll(...t))},i.set(e,s)),s);return u.subscribe([l]),{unsubscribe:()=>u.unsubscribeAll(l.subscriber)}}},87057:(e,t,r)=>{r.d(t,{O:()=>s,S:()=>i});var n=r(71315);let a=n.cg?.document?.head?.querySelector('meta[name="release"]')?.content||"",i="X-GitHub-Client-Version";function s(){return a}},33303:(e,t,r)=>{function n(){return Promise.resolve()}function a(){return new Promise(window.requestAnimationFrame)}async function i(e,t){let r,n=new Promise(t=>{r=self.setTimeout(t,e)});if(!t)return n;try{var a;await Promise.race([n,(a=t,new Promise((e,t)=>{let r=Error("aborted");r.name="AbortError",a.aborted?t(r):a.addEventListener("abort",()=>t(r))}))])}catch(e){throw self.clearTimeout(r),e}}function s(e){let t=[];return function(r){t.push(r),1===t.length&&queueMicrotask(()=>{let r=t.slice(0);t.length=0,e(r)})}}r.d(t,{G$:()=>a,k2:()=>n,rK:()=>s,uk:()=>i})},51987:(e,t,r)=>{r.d(t,{jC:()=>l,kt:()=>s,tV:()=>o});var n=r(87057),a=r(69599),i=r(13523);function s(e){let t={"X-Requested-With":"XMLHttpRequest",...(0,i.wE)(e)};return(0,a.G7)("client_version_header")&&(t={...t,[n.S]:(0,n.O)()}),t}function o(e,t){for(let[r,n]of Object.entries(s(t)))e.set(r,n)}function l(e){return{"X-GitHub-App-Type":e}}},13523:(e,t,r)=>{r.d(t,{$r:()=>s,M1:()=>o,li:()=>a,pS:()=>u,wE:()=>l});var n=r(71315);let a="X-Fetch-Nonce",i=new Set;function s(e){i.add(e)}function o(){return i.values().next().value||""}function l(e){let t={};return void 0!==e&&(t["X-Fetch-Nonce-To-Validate"]=e),void 0===e?t[a]=o():i.has(e)?t[a]=e:t[a]=Array.from(i).join(","),t}function u(){let e=n.XC?.head?.querySelector('meta[name="fetch-nonce"]')?.content||"";e&&s(e)}},37285:(e,t,r)=>{r.d(t,{Av:()=>o,BM:()=>a,Gr:()=>l,HX:()=>d,M_:()=>p,RD:()=>c,rb:()=>i});var n=r(71315);let a="GraphQLTraces",i="GraphQLTracingRefresh",s=decodeURIComponent(new URLSearchParams(n.fV.search).get("disable_clusters")||"").split(",").filter(e=>""!==e);function o(e){if(!n.cg||!l()||!e)return;let t=n.cg;t&&!t[a]&&(t[a]=[]),t&&e.__trace&&(t[a].push(e.__trace),"function"==typeof t[i]&&t[i]())}function l(){let e=n.cg;return"true"===new URLSearchParams(n.fV.search).get("_tracing")||e&&void 0!==e[a]}function u(){return s.length>0}function c(e){if(!l()&&!u())return e;let t=new URL(e,n.fV.origin);return l()&&t.searchParams.set("_tracing","true"),u()&&t.searchParams.set("disable_clusters",s.join(",")),t.pathname+t.search}function d(e){return s.indexOf(e)>-1}function p(e){let t=s.indexOf(e);t>-1?s.splice(t,1):s.push(e);let r=new URLSearchParams(n.fV.search);r.set("disable_clusters",s.join(",")),n.fV.search=r.toString()}},30721:(e,t,r)=>{r.d(t,{VB:()=>SSRNetwork,SD:()=>T,E7:()=>R});var n=r(50467),a=r(40961),i=r(69487),s=r(37285),o=r(96379),l=r(71315),u=r(38102);let c=["SAML","SERVICE_UNAVAILABLE"],d={FORBIDDEN:["SAML error"],AUTHENTICATION:["Couldn\u2019t authenticate you"]},p={NOT_FOUND:[["repository","issue"]]};var h=r(51987);function f(e,t){let r=p[e];if(!r)return!1;for(let e of r){if(t.length!==e.length)continue;let r=!0;for(let n=0;n<t.length;n++)if(t[n]!==e[n]&&"*"!==e[n]){r=!1;break}if(r)return!1}return!0}let m=class ValidationError extends Error{constructor(e,t,r){super(e,t),(0,n._)(this,"catalogService",void 0),this.catalogService=r,this.name="ValidationError"}};async function g(e,t,r){if(e.status>401&&404!==e.status){let n=await e.text(),a={url:e.url,timestamp:new Date().toISOString(),persistedQueryId:t,persistedQueryName:r,failureRequestId:e.headers.get("X-Github-Request-Id")},i=`HTTP error (${e.status}): ${n||"No additional text"}.
    Error Info: ${JSON.stringify(a)}`;if(429===e.status)throw{message:i,cause:e.status};throw Error(i,{cause:e.status})}}async function v(e,t,r,n="GET",a,i,s,o){return(await b(e,t,r,n,{isSubscription:!1,scope:void 0},a,i,s,o)).response}async function b(e,t,r,n="POST",a={},o,p,h,g){let v=JSON.stringify((0,i.stableCopy)({query:e,variables:r,...a.scopeObject?{scopeObject:a.scopeObject}:{}})),{isSubscription:y,scope:S,subscriptionTopic:_,dispatchTime:E}=a,A=function(e,t,r,n,a,i,s="/_graphql"){let o=[];if("GET"===e&&o.push(`body=${t}`),r&&o.push("subscription=1"),a&&o.push(`scope=${encodeURIComponent(a)}`),n&&o.push(`subscriptionTopic=${encodeURIComponent(n)}`),i&&o.push(`dispatchTime=${encodeURIComponent(i)}`),l.cg){let e=new URL(l.cg.location.href,l.cg.location.origin).searchParams.get("_features");e&&o.push(`_features=${e}`)}return o.length>0?`${s}?${o.join("&")}`:s}(n,encodeURIComponent(v),y,_,S,E,o),k=null;try{let{subscriptionId:r,requestId:a,json:i,status:o}=await w(A,n,e,t,v,p);if(k=r,h&&i.errors){let e=h[o];if(e)for(let r of i.errors){let n=e[r.type];n?.({persistedQueryName:t,errorMessage:r.message})}}let l=function(e,t,r,n){var a,i;if(a=t,i=e,"errors"in i&&(i.errors.filter(e=>{let t=c.includes(e.type)||!!d[e.type]?.includes(e.message),r=f(e.type,e.path);return t||r}).map(e=>{console.error(`Failed to fetch data. Please use this request ID when contacting support: ${a} Error: ${e.type}: ${e.message} (path: ${e.path})`)}),i.errors=i.errors.filter(e=>{let t=c.includes(e.type)||!!d[e.type]?.includes(e.message),r=f(e.type,e.path);return!t&&!r})),"errors"in e&&e.errors.length){let t=e.errors.map(e=>`GraphQL error: ${e.type}: ${e.message} (path: ${e.path})`).join(", "),a=new m(`${t} (Persisted query id: ${r})`,{cause:e.errors},e.extensions?.query_owning_catalog_service);if(n)(0,u.N7)(a),n.error(a);else throw a}if(!("data"in e)){let a=Error(`Expected data property in response: ${JSON.stringify(e)}. persistedQueryId: ${r}, requestId: ${t}`);if(n)(0,u.N7)(a),n.error(a);else throw a}return e}(i,a,e,g);return l&&(0,s.Av)(l),{subscriptionId:k,response:l}}catch(e){if(g)return"object"==typeof e&&null!==e&&"cause"in e&&429===e.cause||(0,u.N7)(e),g.error(e),{subscriptionId:k,response:{errors:[{message:"An error occurred while fetching data. Please try again later."}],extensions:{}}};throw e}}async function w(e,t,r,n,a,i){return y((0,s.RD)(e),t,r,n,a,i)}async function y(e,t,r,n,a,i){let s,l,c={...(0,h.kt)()};i?.issues_react_perf_test&&(c["X-LUC-Environment"]="issues");let d=(s="GET"===t?await fetch(e,{method:t,cache:"no-cache",credentials:"include",headers:{Accept:"application/json",...c}}):await (0,o.DI)(e,{method:t,headers:{Accept:"application/json",...c},...a?{body:a}:void 0})).headers.get("X-Subscription-ID"),p=s.headers.get("X-Github-Request-Id")||"",f=s.status;await g(s,r,n);try{l=await s.json()}catch(r){let t={error:r,status:f,url:e,requestId:p};throw(0,u.N7)(Error(`Failed to parse server JSON response ${JSON.stringify(t)}`)),Error(`Failed to parse server response. Please try again later. ${JSON.stringify(t)}`)}return{subscriptionId:d,requestId:p,json:l,status:f}}let S=[{kind:"linked",handle(e,t,r){if(null!=t&&t.getType()===i.ROOT_TYPE&&"node"===e.name&&r.hasOwnProperty("id"))return r.id}},{kind:"pluralLinked",handle(e,t,r){if(null!=t&&t.getType()===i.ROOT_TYPE&&"nodes"===e.name&&r.hasOwnProperty("ids"))return r.ids}}];var _=r(11418),E=r(73056),A=r(69982);function k(e){return(0,A.unstable_scheduleCallback)(A.unstable_LowPriority,e)}let x={cancel:()=>!1,schedule:e=>((0,a.unstable_batchedUpdates)(e),"")};let SSRNetwork=class SSRNetwork{execute(e,t,r){return this.relayNetwork.execute(e,t,r)}getPreloadedSubscriptions(){return this.preloadedSubscriptions}constructor(e,t={},r,a,s,o){(0,n._)(this,"relayNetwork",void 0),(0,n._)(this,"ssrPreloadedData",void 0),(0,n._)(this,"preloadedSubscriptions",void 0),(0,n._)(this,"warningsShown",void 0),(0,n._)(this,"enabled_features",void 0),(0,n._)(this,"maxAge",void 0),(0,n._)(this,"errorCallbacks",void 0),this.ssrPreloadedData=e,this.enabled_features=t,this.preloadedSubscriptions=r,this.warningsShown=new Set,this.maxAge=s,this.errorCallbacks=o,this.relayNetwork=i.Network.create((e,t)=>i.Observable.create(r=>{let n=function({params:e,variables:t,ssrPreloadedQueries:r,baseUrl:n,emitWarning:a,enabledFeatures:i,maxAge:s,errorCallbacks:o,observer:u}){if(!e.id)throw Error("params has no id property!");if(e.id&&r){let n=JSON.stringify(t),a=r.get(e.id)?.get(n),i=Math.floor(Date.now()/1e3),o=a?.timestamp;if(a&&(u.next(a),!(s&&o&&i>o+s)))return void u.complete();e.metadata?.isRelayRouteRequest&&(0,l.g5)()}let c="mutation"===e.operationKind?"POST":"GET";if(l.KJ)return v(e.id,e.name,t,c,n,i,o,u)}({params:e,variables:t,ssrPreloadedQueries:this.ssrPreloadedData,baseUrl:a,emitWarning:e=>{this.warningsShown.has(e)||(this.warningsShown.add(e),console.warn(e))},enabledFeatures:this.enabled_features,maxAge:s,errorCallbacks:this.errorCallbacks,observer:r});n instanceof Promise&&n.then(e=>{if(!Array.isArray(e)&&"extensions"in e&&e.extensions&&e.extensions.subscriptions){let t=e.extensions.subscriptions;for(let e in t)for(let r in this.preloadedSubscriptions.has(e)||this.preloadedSubscriptions.set(e,new Map),t[e])this.preloadedSubscriptions.get(e)?.set(r,t[e][r])}r.next(e),r.complete()})}),(e,t)=>(function(e,t,r=new Map){let n=e.id,a=e.name;return i.Observable.create(i=>{let s=()=>{},o=!1;return async function(){if(!n)throw Error("unexpected operation with no id!");let l=e.metadata?.scope,c=function(e,t,r,n){let a=n.get(e);if(a)e:for(let[e,n]of a){for(let[n,a]of Object.entries(JSON.parse(e)))if("$scope"===n&&r!==a||t[n]!==a)continue e;return n}}(n,t,l,r),d=null;if(c)d=c.subscriptionId,c.response&&i.next(c.response);else try{let e=await b(n,a,t,"GET",{isSubscription:!0,scope:l});d=e.subscriptionId,e.response&&i.next(e.response)}catch(e){if(e instanceof Error&&e.message.includes("Subscription halted"))return;throw e}try{let e=await (0,_.H)();if(o)return;let r=(0,E.$)(e,d,async({scope_object:e,subscription_topic:r,dispatch_time:s})=>{try{let{response:o}=await b(n,a,{...t},"GET",{isSubscription:!0,scopeObject:e,subscriptionTopic:r,dispatchTime:s,scope:l});o&&i.next(o)}catch(e){(0,u.N7)(e,{message:`Error in fetching update for ${n} with variables ${JSON.stringify(t)}`})}});r?.unsubscribe&&(s=r.unsubscribe)}catch(e){i.error(e)}}(),{get closed(){return o},unsubscribe(){o=!0,s()}}})})(e,t,this.preloadedSubscriptions))}};let R=(e,t)=>{let r=new SSRNetwork(new Map,{},new Map,e,void 0,t),n=new i.Environment({scheduler:x,store:new i.Store(new i.RecordSource,{gcReleaseBufferSize:50,queryCacheExpirationTime:3e5,gcScheduler:k}),getDataID:(e,t)=>{if("Viewer"===t)return null==e.id?(0,i.generateClientID)("client:root","viewer"):e.id;if("ProjectV2SingleSelectFieldOption"===t){let t=[];return e.id&&t.push(e.id),e.name&&t.push(e.name),e.color&&t.push(e.color),e.description&&t.push(function(e){let t=0;if(0===e.length)return t;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return t}(e.description)),t.join("_")}return e.id},network:r,missingFieldHandlers:S});return n.options={baseUrl:e,getPreloadedSubscriptions:()=>r.getPreloadedSubscriptions()},n};function T({environment:e,query:t,variables:r={}}){let n=(0,i.getRequest)(t),a=(0,i.createOperationDescriptor)(n,r);return e.retain(a),(0,i.fetchQuery)(e,t,r,{fetchPolicy:"store-or-network"})}},73900:(e,t,r)=>{r.d(t,{Kq:()=>SoftNavErrorEvent,RQ:()=>SoftNavEndEvent,gh:()=>SoftNavPayloadEvent,ni:()=>SoftNavSuccessEvent,sW:()=>SoftNavStartEvent});var n=r(50467),a=r(82591);let i=class SoftNavEvent extends Event{constructor(e,t){super(t),(0,n._)(this,"mechanism",void 0),this.mechanism=e}};let SoftNavStartEvent=class SoftNavStartEvent extends i{constructor(e){super(e,a.z.START)}};let SoftNavSuccessEvent=class SoftNavSuccessEvent extends i{constructor(e,t){super(e,a.z.SUCCESS),(0,n._)(this,"visitCount",void 0),this.visitCount=t}};let SoftNavErrorEvent=class SoftNavErrorEvent extends i{constructor(e,t){super(e,a.z.ERROR),(0,n._)(this,"error",void 0),this.error=t}};let SoftNavEndEvent=class SoftNavEndEvent extends i{constructor(e){super(e,a.z.END)}};let SoftNavPayloadEvent=class SoftNavPayloadEvent extends Event{constructor(e){super("soft-nav:payload"),(0,n._)(this,"payload",void 0),(0,n._)(this,"appPayload",void 0),this.payload=e.payload,this.appPayload=e.appPayload}}},65432:(e,t,r)=>{r.d(t,{Bu:()=>f,SC:()=>u,Ti:()=>p,iS:()=>c,k5:()=>l,o4:()=>d,rZ:()=>h});var n=r(82591),a=r(73900),i=r(15838),s=r(94416);let o=0;function l(){o=0,document.dispatchEvent(new Event(n.z.INITIAL)),(0,s.xT)()}function u(e){(0,s.LM)()||(document.dispatchEvent(new Event(n.z.PROGRESS_BAR.START)),document.dispatchEvent(new a.sW(e)),(0,s.Vy)(e),(0,s.ZW)(),(0,s.HK)(),(0,i.E5)())}function c(e={}){g(e)&&(o+=1,document.dispatchEvent(new a.ni((0,s.di)(),o)),p(e))}function d(e={}){if(!g(e))return;o=0;let t=(0,s.my)()||s.BW;document.dispatchEvent(new a.Kq((0,s.di)(),t)),m(),(0,i.Cd)(t),(0,s.xT)()}function p(e={}){if(!g(e))return;let t=(0,s.di)();m(),document.dispatchEvent(new a.RQ(t)),(0,s.Ff)(),(0,s.JA)(t)}function h(e={}){g(e)&&((0,i.Im)(),document.dispatchEvent(new Event(n.z.RENDER)))}function f(){document.dispatchEvent(new Event(n.z.FRAME_UPDATE))}function m(){document.dispatchEvent(new Event(n.z.PROGRESS_BAR.END))}function g({skipIfGoingToReactApp:e,allowedMechanisms:t=[]}={}){return(0,s.LM)()&&(0===t.length||t.includes((0,s.di)()))&&(!e||!(0,s.gc)())}},82591:(e,t,r)=>{r.d(t,{z:()=>n});let n=Object.freeze({INITIAL:"soft-nav:initial",START:"soft-nav:start",REPLACE_MECHANISM:"soft-nav:replace-mechanism",SUCCESS:"soft-nav:success",ERROR:"soft-nav:error",FRAME_UPDATE:"soft-nav:frame-update",END:"soft-nav:end",RENDER:"soft-nav:render",PROGRESS_BAR:{START:"soft-nav:progress-bar:start",END:"soft-nav:progress-bar:end"}})},15838:(e,t,r)=>{r.d(t,{Cd:()=>l,E5:()=>o,Im:()=>u,nW:()=>s});var n=r(11083),a=r(94416);let i="stats:soft-nav-duration",s={turbo:"TURBO",react:"REACT","turbo.frame":"FRAME",ui:"UI",hard:"HARD"};function o(){window.performance.clearResourceTimings(),window.performance.mark(i)}function l(e){(0,n.i)({turboFailureReason:e,turboStartUrl:(0,a.dR)(),turboEndUrl:window.location.href})}function u(){let e=function(){if(0===performance.getEntriesByName(i).length)return null;performance.measure(i,i);let e=performance.getEntriesByName(i).pop();return e?e.duration:null}();if(!e)return;let t=s[(0,a.di)()],r=Math.round(e);t===s.react&&document.dispatchEvent(new CustomEvent("staffbar-update",{detail:{duration:r}})),(0,n.i)({requestUrl:window.location.href,softNavigationTiming:{mechanism:t,destination:(0,a.fX)()||"rails",duration:r,initiator:(0,a.Pv)()||"rails"}})}},8625:(e,t,r)=>{r.d(t,{H:()=>a});var n=r(96540);let a=({inputRef:e,fallbackEventHandler:t})=>(0,n.useCallback)((r,n,a)=>{let i=e.current;if(!i)return;let s=document.activeElement;i.focus();let o=n??[i.selectionStart??i.value.length,i.selectionEnd??i.value.length],l=void 0===a?((e,t,r)=>{let n=t[1]-t[0];return e<t[0]?e:e<t[1]?t[0]+r:e+(r-n)})(i.selectionStart??i.value.length,o,r.length):Array.isArray(a)?a[0]:a,u=Array.isArray(a)?a[1]:l,c=!1;try{if(document.activeElement!==i)throw Error("Input must be focused to use execCommand");i.setSelectionRange(o[0],o[1]),c=""===r?document.execCommand("delete",!1):document.execCommand("insertText",!1,r),i.setSelectionRange(l,u)}catch{c=!1}if((s instanceof HTMLInputElement||s instanceof HTMLTextAreaElement)&&s.focus(),!c){let n=i.value.slice(0,o[0])+r+i.value.slice(o[1]),a=new InputEvent("input",{bubbles:!1});e.current.value=n,e.current.setSelectionRange(l,u),e.current.dispatchEvent(a),t(((e,t)=>({...e,nativeEvent:e,target:t,currentTarget:t,preventDefault:()=>e.preventDefault(),isDefaultPrevented:()=>e.defaultPrevented,isPropagationStopped:()=>!1,persist:()=>({})}))(a,e.current))}},[e,t])},95304:(e,t,r)=>{r.d(t,{O:()=>o,P:()=>s});var n=r(96540),a=r(96379),i=r(47723);async function s(e=""){let t=e.trim()?`${i.XT}?q=${encodeURIComponent(e.trim())}`:i.XT,r=await (0,a.lS)(t);if(r.ok){let t=(await r.json()).repositories.map(e=>({id:e.id,nameWithOwner:e.nameWithOwner,enabled:e.enabled,name:e.nameWithOwner,nameOnly:e.name,owner:e.owner,defaultBranch:e.defaultBranch,private:"public"!==e.visibility}));if(e.trim()){let r=e.toLowerCase();t=t.filter(e=>e.nameWithOwner.toLowerCase().includes(r)||e.nameOnly.toLowerCase().includes(r))}return t}return[]}function o(e){let[t,r]=(0,n.useState)(null),[a,i]=(0,n.useState)(""),[o,l]=(0,n.useState)(!0),[u,c]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!e||t)return;let n=`${e.owner.login}/${e.name}`;r({id:e.databaseId||0,owner:e.owner.login,name:n,nameOnly:e.name,nameWithOwner:n,enabled:!0,defaultBranch:"",private:e.isPrivate||!1}),(async()=>{try{c(!0);let e=await s(n);if(!e)return;let t=e.find(e=>e.nameWithOwner===n);t&&(i(t.defaultBranch),r(e=>e?{...e,defaultBranch:t.defaultBranch}:e))}finally{c(!1)}})()},[e,t]),(0,n.useEffect)(()=>{(async()=>{try{l(!0),await s()}finally{l(!1)}})()},[]);let d=(0,n.useCallback)(e=>{e&&(r(e),i(e.defaultBranch))},[]);return{selectedRepo:t,selectedBranch:a,isLoadingRepos:o,isLoadingBranch:u,setSelectedBranch:i,handleRepoSelect:d}}},71555:(e,t,r)=>{r.d(t,{a:()=>C});var n=r(74848),a=r(70170),i=r(71315),s=r(83494),o=r(8625),l=r(74021),u=r(64515),c=r(16255),d=r(34164),p=r(24249),h=r(96540),f=r(52446),m=r(45221),g=r(35181),v=r(19342);let b={Overlay_0:"AutocompleteSuggestions-module__Overlay_0--LMGK_",suggestion:"AutocompleteSuggestions-module__suggestion--ted1j",ActionList_0:"AutocompleteSuggestions-module__ActionList_0--iXEKc"},w=new Set([" ",`
`]),y=new Set([".",`
`]),S=e=>"string"==typeof e?e:e.value,_=e=>"string"==typeof e?e:null===e.value?e.key:e.key??e.value,E=(...e)=>t=>{for(let r of[...e].reverse())t.isDefaultPrevented()||r?.(t)},A=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.l.Item,{disabled:!0,children:(0,n.jsx)(v.r,{})}),(0,n.jsx)(f.l.Item,{disabled:!0,children:(0,n.jsx)(v.r,{})}),(0,n.jsx)(f.l.Item,{disabled:!0,children:(0,n.jsx)(v.r,{})})]}),k=({suggestion:e,onSelect:t,isActive:r,id:a,parentRole:i})=>{let s={id:a,children:S(e),role:"menu"===i?"menuitem":"option",active:r,className:b.suggestion,"aria-selected":"listbox"===i&&!!r||void 0,onMouseDown:e=>{e.preventDefault(),t()}};return"string"==typeof e?(0,n.jsx)(f.l.Item,{...s}):e.render(s)},x=({suggestions:e,portalName:t,triggerCharCoords:r,onClose:a,onCommit:i,inputRef:s,visible:o,defaultPlacement:l,activeSuggestion:u,getSuggestionId:c,id:d,menuTitle:p,role:v})=>{let w=(0,h.useRef)(null),[y,S]=(0,h.useState)(0),[E,x]=(0,h.useState)("auto");(0,m.A)(function(){x("auto");let e=w.current?.offsetHeight??0,t=r.top+r.height,n=t+e>window.innerHeight,a=r.top-e,i=a<0,s={below:n&&!i?a:t,above:i&&!n?t:a}[l];if(Number.isNaN(s)&&(s=0),S(Math.max(0,s)),n&&i){let e="above"===l?window.innerHeight+s:window.innerHeight-s;x(`${e}px`)}},[r.top,r.height,e,o,l]);let R=(0,n.jsx)(n.Fragment,{children:"loading"===e?(0,n.jsx)(A,{}):e?.map(e=>(0,n.jsx)(k,{suggestion:e,id:c(e),onSelect:()=>i(e),isActive:u===e,parentRole:v},_(e)))}),T=(0,h.useId)();return o?(0,n.jsx)(g.Ay,{onEscape:a,onClickOutside:a,returnFocusRef:s,preventFocusOnOpen:!0,portalContainerName:t,top:y,left:r.left,ref:w,className:b.Overlay_0,children:(0,n.jsx)(f.l,{role:v,id:d,"aria-label":p?void 0:"Autocomplete suggestions","aria-labelledby":p?T:void 0,className:b.ActionList_0,style:{height:E},children:p?(0,n.jsxs)(f.l.Group,{children:[(0,n.jsx)(f.l.GroupHeading,{id:T,children:p}),R]}):R})}):(0,n.jsx)(n.Fragment,{})};try{A.displayName||(A.displayName="LoadingIndicator")}catch{}try{k.displayName||(k.displayName="SuggestionListItem")}catch{}try{x.displayName||(x.displayName="AutocompleteSuggestions")}catch{}let R={container:"InlineAutocomplete-module__container--lzMAk",fullWidth:"InlineAutocomplete-module__fullWidth--xhTmc"},T=e=>{try{return e.selectionStart}catch(e){if(e instanceof TypeError)return null;throw e}},I=()=>{},C=({triggers:e,suggestions:t,onShowSuggestions:r,onHideSuggestions:f,onSelectSuggestion:m,style:g,children:v,tabInsertsSuggestions:b=!1,suggestionsPlacement:A="below",portalName:k,fullWidth:C=!1,title:N,asMenu:O,...M})=>{let[,P]=(0,h.useState)(0),$=(0,l.Lf)(M),j=(0,h.useRef)(null);(0,u.T)(v.ref??I,j);let L=function(e,t){if(h.Children.only(e),t.current&&!(t.current instanceof HTMLInputElement)&&!(t.current instanceof HTMLTextAreaElement))throw TypeError("AutocompleteTextarea child must be a component that forwards a ref and props to an <input> or <textarea> element.");return e}(v,j),D=(0,o.H)({inputRef:j,fallbackEventHandler:L.props.onChange??I}),q=(0,h.useRef)(null),W=null!==t&&t.length>0,[U,H]=(0,h.useState)(),B=Array.isArray(t)?t.find(e=>_(e)===U)??t[0]:void 0;U&&!W&&H(void 0),(0,h.useEffect)(()=>{if(W){let e=(0,a.n)(()=>P(e=>e+1),100);return document.addEventListener("scroll",e,{capture:!0}),()=>{document.removeEventListener("scroll",e,{capture:!0})}}},[W]);let G=j.current&&q.current&&W?new p.Qr(j.current,(T(j.current)??0)-q.current.query.length).getBoundingClientRect():{top:0,left:0,height:0},z=e=>{if(!B||!Array.isArray(t))return;let r=e=>{H(e?_(e):void 0)};switch(e){case"up":r(t[t.indexOf(B)-1]??t.at(-1));break;case"down":r(t[t.indexOf(B)+1]??t[0]);break;case"start":r(t[0]);break;case"end":r(t.at(-1))}},F=(e=B)=>{if(!e)return;let t=(e=>"object"==typeof e&&null===e.value)(e),r=S(e)??"";if(!j.current||!q.current)return;let{query:n,trigger:a}=q.current,i=T(j.current)??0,s=n.length+a.triggerChar.length,o=i-s,l=t||(a.keepTriggerCharOnCommit??!0)?a.triggerChar:"",u=!t&&(a.insertSpaceOnCommit??!0),c=`${l}${r}${u?" ":""}`;f(),D(c,[o,o+s]),m?.({suggestion:e,trigger:a,query:n,target:j.current})},V=(0,h.useId)(),K=e=>`${V}-${_(e)}`,X=!O,J=(0,h.cloneElement)(L,{...$,onBlur:E(L.props.onBlur,()=>{f()}),onKeyDownCapture:E(L.props.onKeyDownCapture,e=>{if(W)switch(e.key){case"ArrowRight":case"ArrowLeft":f();break;case"Tab":b||f()}}),onChange:E(L.props.onChange,t=>{let n=T(t.currentTarget);if(null===n)return void f();let a=((e,t,r)=>{let n=e.sort((e,t)=>t.triggerChar.length-e.triggerChar.length);for(let e=r-1,a="",i=n;e>=0&&i.length>0;e--){let r=t[e]??"";for(let n of(a=r+a,w.has(r)&&(i=i.filter(e=>e.multiWord)),y.has(r)&&(i=i.filter(e=>!e.multiWord)),i.filter(e=>a.startsWith(e.triggerChar)))){let r=t[e-1]??"",s=a[1]??"";if((!r||/[\s([]/.test(r))&&(!s||!/\s/.test(s)))return{trigger:n,query:a.slice(n.triggerChar.length)};i=i.filter(e=>e!==n)}}return null})(e,t.currentTarget.value,n);q.current=a&&{...a,target:t.currentTarget},q.current?r(q.current):f()}),ref:j,role:W&&X?"combobox":L.props.role,"aria-expanded":W&&X?"true":L.props["aria-expanded"],"aria-activedescendant":B?K(B):L.props["aria-activedescendant"],"aria-controls":W&&X?V:L.props["aria-controls"],"aria-owns":W&&O?V:L.props["aria-owns"],"aria-autocomplete":W&&X?"list":L.props["aria-autocomplete"],"aria-haspopup":W&&X?"listbox":L.props["aria-haspopup"]}),Q=W?"loading"===t?"Loading autocomplete suggestions\u2026":X?`${t.length} autocomplete ${1===t.length?"suggestion":"suggestions"} available; "${S(t[0])}" is highlighted. Press ${b?"Enter or Tab":"Enter"} to select.`:"":"";return(0,n.jsxs)(s.tL,{commands:W?{"github:cancel":()=>f(),"github:select":()=>F(),"github:focus-next":b?()=>F():void 0,"github:down":()=>z("down"),"github:up":()=>z("up"),"github:go-to-start":()=>z("start"),"github:go-to-end":()=>z("end")}:{},className:(0,d.$)(R.container,C&&R.fullWidth),style:g,children:[J,i.KJ&&(0,n.jsx)(x,{id:V,suggestions:t,inputRef:j,onCommit:F,onClose:f,triggerCharCoords:G,visible:W,defaultPlacement:A,portalName:k,activeSuggestion:B,getSuggestionId:K,menuTitle:N,role:O?"menu":"listbox"}),i.KJ&&(0,n.jsx)(c.Z,{children:(0,n.jsx)("span",{"aria-live":"assertive","aria-atomic":!0,style:{clipPath:"circle(0)",position:"absolute"},children:Q})})]})};try{C.displayName||(C.displayName="InlineAutocomplete")}catch{}},46642:(e,t,r)=>{r.d(t,{P:()=>c});var n=r(74848),a=r(96540),i=r(38621),s=r(1002),o=r(55847),l=r(70170),u=r(86391);function c({currentSelection:e,repositoryLoader:t,onSelect:r,selectionVariant:c,selectAllOption:d,additionalButtonProps:p,buttonText:h="",width:f,truncateMaxWidth:m}){let[g,v]=(0,a.useState)(""),[b,w]=(0,a.useState)([]),[y,S]=(0,a.useState)(!0),_=(0,a.useCallback)((0,l.s)(async e=>{try{let r=await t(e);w(r)}catch{}S(!1)},200),[t,w,S]);(0,a.useEffect)(()=>{S(!0),_(g)},[g,_,S]);let E=(0,a.useCallback)(e=>{"single"===c?!e[0]||e[0]._all?r(void 0):r(e[0]):r(e)},[c,r]),A=(0,a.useMemo)(()=>"multiple"===c?e||[]:e?[e]:[],[c,e]),k=(0,a.useCallback)(e=>{let t,r="medium"===f?35:24;return(e.name.length>r&&(t=`${e.name.substring(0,r)}...`),e._all)?{id:e.name,text:"All repositories",source:e,groupId:"all"}:{id:e.name,text:t||e.name,source:e,groupId:"select",disabled:!1===e.enabled,leadingVisual:()=>e.private?(0,n.jsx)(i.RepoLockedIcon,{size:16}):(0,n.jsx)(i.RepoIcon,{size:16})}},[f]),x=(0,a.useCallback)(e=>e.name,[]),R=(0,a.useMemo)(()=>{let e=[];return e.push(...A.filter(e=>b.every(t=>t.name!==e.name))||[]),e.push(...b),d&&e.push({name:"$all$",_all:!0}),e},[b,d,A]),T=h,I=i.RepoIcon;return T||("multiple"===c?T=A.length>0?`${A.length} repositor${A.length>1?"ies":"y"}`:"Select repositories":A.length>0&&A[0]?(T=A[0].name,I=A[0].private?i.RepoLockedIcon:i.RepoIcon):T=d?"All repositories":"Select a repository"),(0,n.jsx)(u.O,{renderAnchor:({"aria-labelledby":e,...t})=>(0,n.jsx)(o.Q,{leadingVisual:I,trailingAction:i.TriangleDownIcon,"aria-labelledby":e,...t,...p,children:(0,n.jsx)(s.A,{title:T,maxWidth:m??195,children:T})}),placeholderText:"Search",items:R,loading:y,groups:d?[{groupId:"all"},{groupId:"select"}]:[],selectionVariant:c,initialSelectedItems:A,onSelectionChange:E,filterItems:v,getItemKey:x,convertToItemProps:k,title:"Select a repository",width:f})}try{c.displayName||(c.displayName="ReposSelector")}catch{}}}]);
//# sourceMappingURL=packages_relay-environment_relay-environment_ts-packages_soft-nav_state_ts-packages_agent-ses-2d4f01-621ed9dfe08a.js.map